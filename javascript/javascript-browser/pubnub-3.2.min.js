(function(){
var n=null;function p(){return function(){}}
window.JSON&&window.JSON.stringify||function(){function a(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var c=m[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(b,D){var j,f,e,g,m=d,k,h=D[b];h&&("object"===typeof h&&"function"===typeof h.toJSON)&&(h=h.toJSON(b));"function"===typeof l&&(h=l.call(D,b,h));switch(typeof h){case "string":return a(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);
case "object":if(!h)return"null";d+=i;k=[];if("[object Array]"===Object.prototype.toString.apply(h)){g=h.length;for(j=0;j<g;j+=1)k[j]=c(j,h)||"null";e=0===k.length?"[]":d?"[\n"+d+k.join(",\n"+d)+"\n"+m+"]":"["+k.join(",")+"]";d=m;return e}if(l&&"object"===typeof l){g=l.length;for(j=0;j<g;j+=1)f=l[j],"string"===typeof f&&(e=c(f,h))&&k.push(a(f)+(d?": ":":")+e)}else for(f in h)Object.hasOwnProperty.call(h,f)&&(e=c(f,h))&&k.push(a(f)+(d?": ":":")+e);e=0===k.length?"{}":d?"{\n"+d+k.join(",\n"+d)+"\n"+
m+"}":"{"+k.join(",")+"}";d=m;return e}}window.JSON||(window.JSON={});"function"!==typeof String.prototype.toJSON&&(String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d,i,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,
b,j){var f;i=d="";if("number"===typeof j)for(f=0;f<j;f+=1)i+=" ";else"string"===typeof j&&(i=j);if((l=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof JSON.parse&&(JSON.parse=function(a){return eval("("+a+")")})}();
if(!window.PUBNUB){var r=function(){return"x"+ ++aa+""+ +new Date},s=function(){return+new Date},ba=function(a,c){function b(){i+c>s()?(clearTimeout(d),d=setTimeout(b,c)):(i=s(),a())}var d,i=0;return b},t=function(a){return document.getElementById(a)},u=function(a){console.log(a)},w=function(a,c){var b=[];v(a.split(/\s+/),function(a){v((c||document).getElementsByTagName(a),function(a){b.push(a)})});return b},v=function(a,c){if(a&&c)if("undefined"!=typeof a[0])for(var b=0,d=a.length;b<d;)c.call(a[b],
a[b],b++);else for(b in a)a.hasOwnProperty&&a.hasOwnProperty(b)&&c.call(a[b],b,a[b])},y=function(a,c){var b=[];v(a||[],function(a,i){b.push(c(a,i))});return b},da=function(a,c){return a.replace(ca,function(a,d){return c[d]||a})},z=function(a,c,b){v(a.split(","),function(a){function i(a){a||(a=window.event);b(a)||(a.cancelBubble=!0,a.returnValue=!1,a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())}c.addEventListener?c.addEventListener(a,i,!1):c.attachEvent?c.attachEvent("on"+
a,i):c["on"+a]=i})},A=function(){return w("head")[0]},B=function(a,c,b){if(b)a.setAttribute(c,b);else return a&&a.getAttribute&&a.getAttribute(c)},C=function(a,c){for(var b in c)if(c.hasOwnProperty(b))try{a.style[b]=c[b]+(0<"|width|height|top|left|".indexOf(b)&&"number"==typeof c[b]?"px":"")}catch(d){}},E=function(a){return document.createElement(a)},I=function(){return F||H()?0:r()},J=function(a){return y(encodeURIComponent(a).split(""),function(a){return 0>"-_.!~*'()".indexOf(a)?a:"%"+a.charCodeAt(0).toString(16).toUpperCase()}).join("")},
O=function(a){function c(a,b){k||(k=1,a||G(b),g.onerror=n,clearTimeout(h),setTimeout(function(){a&&K();var b=t(Q),c=b&&b.parentNode;c&&c.removeChild(b)},L))}if(F||H()){a:{var b,d,i=function(){if(!l){l=1;clearTimeout(q);try{d=JSON.parse(b.responseText)}catch(a){return f(1)}j(d)}},m=0,l=0,q;q=setTimeout(function(){f(1)},M);var D=a.b||p(),j=a.c||p(),f=function(a){m||(m=1,clearTimeout(q),b&&(b.onerror=b.onload=n,b.abort&&b.abort(),b=n),a&&D())};try{b=H()||window.XDomainRequest&&new XDomainRequest||new XMLHttpRequest;
b.onerror=b.onabort=function(){f(1)};b.onload=b.onloadend=i;b.timeout=M;url=a.url.join(N);if(a.data)for(key in url+="?",a.data)url+=key+"="+a.data[key]+"&";b.open("GET",url,!0);b.send()}catch(e){f(0);F=0;a=O(a);break a}a=f}return a}var g=E("script"),i=a.a,Q=r(),k=0,h=setTimeout(function(){c(1)},M),K=a.b||p(),G=a.c||p();window[i]=function(a){c(0,a)};g[P]=P;g.onerror=function(){c(1)};g.src=a.url.join(N);if(a.data)for(key in g.src+="?",a.data)g.src+=key+"="+a.data[key]+"&";B(g,"id",Q);A().appendChild(g);
return c},T=function(){PUBNUB.time(s);PUBNUB.time(function(){setTimeout(function(){R||(R=1,v(S,function(a){a[2].subscribe(a[0],a[1])}))},L)})},H=function(){if(!ea.get)return 0;var a={id:H.id++,send:p(),abort:function(){a.id={}},open:function(c,b){H[a.id]=a;ea.get(a.id,b)}};return a};window.console||(window.console=window.console||{});console.log||(console.log=(window.opera||{}).postError||p());var U,V=window.localStorage;U={get:function(a){try{return V?V.getItem(a):-1==document.cookie.indexOf(a)?
n:((document.cookie||"").match(RegExp(a+"=([^;]+)"))||[])[1]||n}catch(c){}},set:function(a,c){try{if(V)return V.setItem(a,c)&&0;document.cookie=a+"="+c+"; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"}catch(b){}}};var aa=1,ca=/{([\w\-]+)}/g,P="async",N="/",M=31E4,L=1E3,F=-1==navigator.userAgent.indexOf("MSIE 6"),W,Y=Math.floor(9*Math.random())+1;W=function(a){return 0<a.indexOf("pubsub")&&a.replace("pubsub","ps"+(10>++Y?Y:Y=1))||a};var Z={list:{},unbind:function(a){Z.list[a]=[]},bind:function(a,c){(Z.list[a]=
Z.list[a]||[]).push(c)},fire:function(a,c){v(Z.list[a]||[],function(a){a(c)})}},$=t("pubnub")||{},R=0,S=[],fa=function(a){var c={},b=a.publish_key||"",d=a.subscribe_key||"",i=a.ssl?"s":"",m=a.uuid||U.get(d+"uuid")||"",l="http"+i+"://"+(a.origin||"pubsub.pubnub.com"),q={history:function(a,b){var b=a.callback||b,c=a.limit||100,e=a.channel,g=I();if(!e)return u("Missing Channel");if(!b)return u("Missing Callback");O({a:g,url:[l,"history",d,J(e),g,c],c:function(a){b(a)},b:function(a){u(a)}})},time:function(a){var b=
I();O({a:b,url:[l,"time",b],c:function(b){a(b[0])},b:function(){a(0)}})},uuid:function(a){var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)});a&&a(b);return b},publish:function(a,c){var c=c||a.callback||p(),f=a.message,e=a.channel,g=I();if(!f)return u("Missing Message");if(!e)return u("Missing Channel");if(!b)return u("Missing Publish Key");f=JSON.stringify(f);f=[l,"publish",b,d,0,J(e),g,J(f)];O({a:g,c:function(a){c(a)},
b:function(){c([0,"Disconnected"])},url:f,data:{f:m}})},unsubscribe:function(a){function b(a){a in c&&(c[a].d=0,c[a].e&&c[a].e(0))}b(a.channel);b(a.channel+"-pnpres")},subscribe:function(a,b){function f(){var a=I();c[e].d&&(c[e].e=O({a:a,url:[ia,"subscribe",g,J(e),a,k],data:{f:m},b:function(){x||(x=1,ga());setTimeout(f,L);q.time(function(a){a&&x?(x=0,G()):h()})},c:function(a){c[e].d&&(X||(X=1,K()),x&&(x=0,G()),i=U.set(d+e,k=i&&U.get(g+e)||a[1]),v(a[0],function(c){b(c,a)}),setTimeout(f,10))}}))}var e=
a.channel,b=b||a.callback,g=a.subscribe_key||d,i=a.restore,k=0,h=a.error||p(),K=a.connect||p(),G=a.reconnect||p(),ga=a.disconnect||p(),ha=a.presence||p(),x=0,X=0,ia=W(l);if(!R)return S.push([a,b,q]);if(!e)return u("Missing Channel");if(!b)return u("Missing Callback");if(!d)return u("Missing Subscribe Key");e in c||(c[e]={});if(c[e].d)return u("Already Connected");c[e].d=1;a.presence&&q.i({g:a.channel+"-pnpres",a:ha,restore:a.restore});f()},here_now:function(a,b){var b=a.callback||b,c=a.channel,e=
I(),g=W(l);if(!c)return u("Missing Channel");if(!b)return u("Missing Callback");data=n;"0"!=e&&(data.callback=e);O({a:e,url:[g,"v2","presence","sub_key",d,"channel",J(c)],data:data,c:function(a){b(a)},b:function(a){u(a)}})},xdr:O,ready:T,db:U,each:v,map:y,css:C,$:t,create:E,bind:z,supplant:da,head:A,search:w,attr:B,now:s,unique:r,events:Z,updater:ba,init:fa};""==m&&(m=q.f());U.set(d+"uuid",m);return q};PUBNUB=fa({publish_key:B($,"pub-key"),subscribe_key:B($,"sub-key"),ssl:"on"==B($,"ssl"),origin:B($,
"origin"),uuid:B($,"uuid")});C($,{position:"absolute",top:-L});if("opera"in window||B($,"flash"))$.innerHTML="<object id=pubnubs data=https://dh15atwfs066y.cloudfront.net/pubnub.swf><param name=movie value=https://dh15atwfs066y.cloudfront.net/pubnub.swf><param name=allowscriptaccess value=always></object>";var ea=t("pubnubs")||{};z("load",window,function(){setTimeout(T,0)});PUBNUB.rdx=function(a,c){if(!c)return H[a].onerror();H[a].responseText=unescape(c);H[a].onload()};H.id=L;window.jQuery&&(window.jQuery.PUBNUB=
PUBNUB);"undefined"!==typeof module&&(module.h=PUBNUB)&&T()};

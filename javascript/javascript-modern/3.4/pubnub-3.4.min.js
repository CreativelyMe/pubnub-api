(function(){
window.JSON && window.JSON.stringify || function() {
  function b(a) {
    e.lastIndex = 0;
    return e.test(a) ? '"' + a.replace(e, function(a) {
      var b = i[a];
      return"string" === typeof b ? b : "\\u" + ("0000" + a.charCodeAt(0).toString(16)).slice(-4)
    }) + '"' : '"' + a + '"'
  }
  function c(e, n) {
    var f, h, l, i, p = a, j, d = n[e];
    d && ("object" === typeof d && "function" === typeof d.toJSON) && (d = d.toJSON(e));
    "function" === typeof k && (d = k.call(n, e, d));
    switch(typeof d) {
      case "string":
        return b(d);
      case "number":
        return isFinite(d) ? String(d) : "null";
      case "boolean":
      ;
      case "null":
        return String(d);
      case "object":
        if(!d) {
          return"null"
        }
        a += g;
        j = [];
        if("[object Array]" === Object.prototype.toString.apply(d)) {
          i = d.length;
          for(f = 0;f < i;f += 1) {
            j[f] = c(f, d) || "null"
          }
          l = 0 === j.length ? "[]" : a ? "[\n" + a + j.join(",\n" + a) + "\n" + p + "]" : "[" + j.join(",") + "]";
          a = p;
          return l
        }
        if(k && "object" === typeof k) {
          i = k.length;
          for(f = 0;f < i;f += 1) {
            h = k[f], "string" === typeof h && (l = c(h, d)) && j.push(b(h) + (a ? ": " : ":") + l)
          }
        }else {
          for(h in d) {
            Object.hasOwnProperty.call(d, h) && (l = c(h, d)) && j.push(b(h) + (a ? ": " : ":") + l)
          }
        }
        l = 0 === j.length ? "{}" : a ? "{\n" + a + j.join(",\n" + a) + "\n" + p + "}" : "{" + j.join(",") + "}";
        a = p;
        return l
    }
  }
  window.JSON || (window.JSON = {});
  "function" !== typeof String.prototype.toJSON && (String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function() {
    return this.valueOf()
  });
  var e = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, a, g, i = {"\b":"\\b", "\t":"\\t", "\n":"\\n", "\f":"\\f", "\r":"\\r", '"':'\\"', "\\":"\\\\"}, k;
  "function" !== typeof JSON.stringify && (JSON.stringify = function(b, e, f) {
    var h;
    g = a = "";
    if("number" === typeof f) {
      for(h = 0;h < f;h += 1) {
        g += " "
      }
    }else {
      "string" === typeof f && (g = f)
    }
    if((k = e) && "function" !== typeof e && ("object" !== typeof e || "number" !== typeof e.length)) {
      throw Error("JSON.stringify");
    }
    return c("", {"":b})
  });
  "function" !== typeof JSON.parse && (JSON.parse = function(a) {
    return eval("(" + a + ")")
  })
}();
SECOND = 1E3;
function m(b) {
  function c(b) {
    g || (g = 1, clearTimeout(k), a && (a.onerror = a.onload = null, a.abort && a.abort(), a = null), b && v())
  }
  function e() {
    if(!i) {
      i = 1;
      clearTimeout(k);
      try {
        response = JSON.parse(a.responseText)
      }catch(b) {
        return c(1)
      }
      n(response)
    }
  }
  var a, g = 0, i = 0, k = q(function() {
    c(1)
  }, r), v = b.e || function() {
  }, n = b.g || function() {
  };
  try {
    a = "undefined" !== typeof XDomainRequest && new XDomainRequest || new XMLHttpRequest;
    a.onerror = a.onabort = function() {
      c(1)
    };
    a.onload = a.onloadend = e;
    a.timeout = r;
    url = b.url.join(s);
    if(b.data) {
      var f = [];
      url += "?";
      for(key in b.data) {
        f.push(key + "=" + b.data[key])
      }
      url += f.join(t)
    }
    a.open("GET", url, !0);
    a.send()
  }catch(h) {
    return c(0), m(b)
  }
  return c
}
var s = "/", t = "&", q = PUBNUB_COMMON_JS.timeout, r = 31E4, u, w = "undefined" != typeof localStorage && localStorage;
u = {get:function(b) {
  try {
    return w ? w.getItem(b) : -1 == document.cookie.indexOf(b) ? null : ((document.cookie || "").match(RegExp(b + "=([^;]+)")) || [])[1] || null
  }catch(c) {
  }
}, set:function(b, c) {
  try {
    if(w) {
      return w.setItem(b, c) && 0
    }
    document.cookie = b + "=" + c + "; expires=Thu, 1 Aug 2030 20:00:00 UTC; path=/"
  }catch(e) {
  }
}};
var x = {list:{}, unbind:function(b) {
  x.list[b] = []
}, bind:function(b, c) {
  (x.list[b] = x.list[b] || []).push(c)
}, fire:function(b, c) {
  function e(a) {
    a(c)
  }
  var a = x.list[b] || [];
  if(a && e) {
    if("undefined" != typeof a[0]) {
      for(var g = 0, i = a.length;g < i;) {
        e.call(a[g], a[g], g++)
      }
    }else {
      for(g in a) {
        a.hasOwnProperty && a.hasOwnProperty(g) && e.call(a[g], g)
      }
    }
  }
}};
function y(b) {
  var c = {xdr:m, db:u, each:PUBNUB_COMMON_JS.c, map:PUBNUB_COMMON_JS.map, events:x, init:y};
  b.db = u;
  b.xdr = m;
  c.__proto__ = PUBNUB_COMMON_JS.b(b);
  c.f();
  return c
}
"undefined" !== typeof module && (module.d = PN) || "undefined" !== typeof exports && (exports.a = PN) || (PUBNUB = y({}));

})();
